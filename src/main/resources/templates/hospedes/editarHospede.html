<!DOCTYPE html>
<html lang="pt-br">
<head th:replace="~{head}"></head>
<body>
    <header th:replace="~{header}"></header>
    <div class="container">
        <div class="col-12 py-md-5 bd-content">
            <h3 class="bd-title" id="content">Editar HÃ³spede</h3>
            <div class="br-pagebody">
                <div class="col-12">
                    <div class="col-12 alert" style="display: none;"></div>
                    <form class="card card-default" method="POST" id="editarHospede" enctype="multipart/form-data">
                        <div class="card-header">
                            <a style="margin:5px" class="btn btn-default" th:href="@{/hospedes/listar}" type="button">Listar</a>
                        </div>
                        <div class="card-body">
                            <input type="hidden" class="form-control" required name="id" th:value="${hospede.id}">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Nome</label>
                                        <input type="text" class="form-control" name="nome" required th:value="${hospede.nome}">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>CPF</label>
                                        <input type="text" class="form-control" name="cpf" required th:value="${hospede.cpf}">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Telefone</label>
                                        <input type="text" class="form-control" name="telefone" required th:value="${hospede.telefone}">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>E-mail</label>
                                        <input type="email" class="form-control" name="email" required th:value="${hospede.email}">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button style="margin:5px" class="btn btn-success">Salvar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="myModalLabel">Retorno</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="conteudo">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>
</body>
<script th:inline="javascript">
    $(function() {
        $("#editarHospede").submit(function(e) {
            e.preventDefault();
            $.ajax({
                url: '/hospedes/atualizar',
                type: 'POST',
                dataType: 'json',
                data: $("#editarHospede").serialize(),
                success: function(data) {
                    $('#myModal').modal('show');
                    $("#conteudo").html(data.message);
                },
                error: function(error) {
                    $('#myModal').modal('show');
                    const result = JSON.parse(error.responseText);
                    $("#conteudo").html(result.message);
                }
            });
        });
    });
</script>
</html>
